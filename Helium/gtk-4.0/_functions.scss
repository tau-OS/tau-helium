@function gtkalpha($c, $a) {
    @return unquote("alpha(#{$c},#{$a})");
}

@function gtkmix($c1, $c2, $r) {
    @return unquote("mix(#{$c1},#{$c2},#{$r})");
}

@function gtkshade($c, $s) {
    @return unquote("shade(#{$c},#{$s})");
}

@function gtkcolor($c) {
    @return unquote("@#{$c}");
}

@function bg-color($level) {
    // Elevation -2
    @if $level == -3 {
        @return $surface_container_lowest_bg_color;
        // Elevation -1
    } @else if $level == -2 {
        @return $surface_container_low_bg_color;
        // Inverted for OSD & Toasts
    } @else if $level == -1 {
        @return $osd_bg_color;
        // Elevation 0
    } @else if $level == 0 {
        @return $view_bg_color;
        // Elevation 1
    } @else if $level == 1 {
        @return $surface_container_bg_color;
        // Elevation 2
    } @else if $level == 2 {
        @return $surface_container_high_bg_color;
        // Elevation 3
    } @else if $level == 3 {
        @return $surface_container_highest_bg_color;
    } @else {
        @return $view_bg_color;
    }
}

@function state-color($base_color, $overlay_color, $level) {
    // Base
    @if $level == 0 {
        @return image($base_color);
        // Hover
    } @else if $level == 1 {
        @return image(gtkmix($base_color, $overlay_color, 0.08));
        // Active/Checked
    } @else if $level == 2 {
        @return image(gtkmix($base_color, $overlay_color, 0.1));
        // Drag
    } @else if $level == 3 {
        @return image(gtkmix($base_color, $overlay_color, 0.16));
    } @else {
        @return image($base_color);
    }
}

@function shadow($level) {
    // Sunken controls
    @if $level == -1 {
        @return 0 -2px 0 0 rgb(0, 0, 0, 0.1), 0 -1px 0 0 rgb(0, 0, 0, 0.05),
            0 -2px 0 0 rgb(0, 0, 0, 0.025), 0 2px 0 0 rgb(255, 255, 255, 0.025),
            0 1px 0 0 rgb(255, 255, 255, 0.05),
            0 2px 0 0 rgb(255, 255, 255, 0.1);
        // Outline border
    } @else if $level == 0 {
        @return 0 0 0 1px rgb(0, 0, 0, 0.38);
        // Elevation 1
    } @else if $level == 1 {
        @return 0 2px 4px 0px rgb(0, 0, 0, 0.14),
            0 2px 4px 0px rgb(0, 0, 0, 0.14);
        // Elevation 2
    } @else if $level == 2 {
        @return 0 4px 8px 0px rgb(0, 0, 0, 0.14),
            0 4px 8px 0px rgb(0, 0, 0, 0.14);
        // Elevation 3
    } @else if $level == 3 {
        @return 0 8px 16px 0px rgb(0, 0, 0, 0.14),
            0 8px 16px 0px rgb(0, 0, 0, 0.14);
        // Elevation 4
    } @else if $level == 4 {
        @return 0 0 8px 0px rgb(0, 0, 0, 0.2),
            0 14px 28px 0px rgb(0, 0, 0, 0.24);
        // Elevation 5
    } @else if $level == 5 {
        @return 0 0 8px 0px rgb(0, 0, 0, 0.2),
            0 32px 64px 0px rgb(0, 0, 0, 0.24);
    }
}

@function px-to-rem($pixels, $text-size: 10.5pt) {
    @if (unitless($pixels)) {
        $pixels: $pixels * 1px;
    }

    @if (unitless($text-size)) {
        $text-size: $text-size * 1px;
    }

    @if ($pixels > 0) {
        // Workaround GTK clamping instead of rounding up
        @return (calc($pixels / $text-size) * 1rem) + 0.000000001rem;
    } @else {
        @return (calc($pixels / $text-size) * 1rem) - 0.000000001rem;
    }
}
