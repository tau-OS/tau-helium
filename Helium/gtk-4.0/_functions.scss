@function gtkalpha($c,$a) {
  @return unquote("alpha(#{$c},#{$a})");
}

@function gtkmix($c1,$c2,$r) {
  @return unquote("mix(#{$c1},#{$c2},#{$r})");
}

@function gtkshade($c,$s) {
  @return unquote("shade(#{$c},#{$s})");
}

@function gtkcolor($c) {
  @return unquote("@#{$c}");
}

@function bg-color($level) {
  // Inverted for OSD & Toasts
  @if $level == -1 {
      @return $view_fg_color;
  // Views
  } @else if $level == 0 {
      @return image($view_bg_color);
  // Elevation 1
  } @else if $level == 1 {
      @return linear-gradient(0deg, gtkalpha($accent_bg_color, 0.05), gtkalpha($accent_bg_color, 0.05)), image($view_bg_color);
  // Elevation 2
  } @else if $level == 2 {
      @return linear-gradient(0deg, gtkalpha($accent_bg_color, 0.08), gtkalpha($accent_bg_color, 0.08)), image($view_bg_color);
  // Elevation 3
  } @else if $level == 3 {
      @return linear-gradient(0deg, gtkalpha($accent_bg_color, 0.11), gtkalpha($accent_bg_color, 0.11)), image($view_bg_color);
  // Elevation 4
  } @else if $level == 4 {
      @return linear-gradient(0deg, gtkalpha($accent_bg_color, 0.14), gtkalpha($accent_bg_color, 0.14)), image($view_bg_color);
  // Elevation 5
  } @else if $level == 5 {
      @return linear-gradient(0deg, gtkalpha($accent_bg_color, 0.15), gtkalpha($accent_bg_color, 0.15)), image($view_bg_color);
  } @else {
      @return image($view_bg_color);
  }
}

@function shadow($level) {
  // Outline border
  @if $level == 0 {
      @return
          0 0 0 1px rgba(black, 0.2);
  // Elevation 1
  } @else if $level == 1 {
      @return
          0 1px 3px 1px rgba(black, 0.15),
          0 1px 2px 0   rgba(black, 0.3);
  // Elevation 2
  } @else if $level == 2 {
      @return
          0 2px 6px 2px rgba(black, 0.15),
          0 1px 2px 0   rgba(black, 0.3);
  // Elevation 3
  } @else if $level == 3 {
      @return
          0 4px 8px 3px rgba(black, 0.15),
          0 1px 3px 0   rgba(black, 0.3);
  // Elevation 4
  } @else if $level == 4 {
      @return
          0 6px 10px 4px rgba(black, 0.15),
          0 2px 3px 0    rgba(black, 0.3);
  // Elevation 5
  } @else if $level == 5 {
      @return
          0 8px 12px 6px rgba(black, 0.15),
          0 4px 4px 0    rgba(black, 0.3);
  }
}

@function rem($pixels, $text-size: 10pt) {
    @if (unitless($pixels)) {
        $pixels: $pixels * 1px;
    }

    @if (unitless($text-size)) {
        $text-size: $text-size * 1px;
    }

    @if ($pixels > 0) {
        // Workaround GTK clamping instead of rounding up
        @return (calc($pixels / $text-size) * 1rem) + 0.000000001rem;
    } @else {
        @return (calc($pixels / $text-size) * 1rem) - 0.000000001rem;
    }
}
